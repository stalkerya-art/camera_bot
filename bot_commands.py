# bot_commands.py
import logging
from telegram import BotCommand

logger = logging.getLogger(__name__)

def setup_bot_commands(bot, scheduler=None):
    """–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–Ω—é –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞"""
    try:
        # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
        commands = [
            BotCommand("start", "–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã"),
            BotCommand("help", "–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É"),
            BotCommand("cameras", "–°–ø–∏—Å–æ–∫ –∫–∞–º–µ—Ä"),
            BotCommand("capture", "–°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫"),
            BotCommand("stats", "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã"),
            BotCommand("chat_id", "–ü–æ–ª—É—á–∏—Ç—å ID —á–∞—Ç–∞"),
        ]
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
        if scheduler:
            commands.extend([
                BotCommand("schedule_start", "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ—Å–±–æ—Ä"),
                BotCommand("schedule_stop", "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ—Å–±–æ—Ä"),
                BotCommand("schedule_status", "–°—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è"),
                BotCommand("schedule_set", "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª (–º–∏–Ω—É—Ç—ã)"),
            ])
        
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
        bot.set_my_commands(commands)
        logger.info("‚úÖ –ú–µ–Ω—é –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ")
        
        return True
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–º–∞–Ω–¥ –º–µ–Ω—é: {e}")
        return False

def update_commands_description():
    """–û–±–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥ (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)"""
    commands_info = """
üìã **–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:**

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
/start - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
/help - –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É
/cameras - –°–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∫–∞–º–µ—Ä
/capture - –°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫ —Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞–º–µ—Ä—ã
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
/chat_id - –ü–æ–ª—É—á–∏—Ç—å ID —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞

**–ö–æ–º–∞–Ω–¥—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ):**
/schedule_start - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä
/schedule_stop - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä
/schedule_status - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
/schedule_set - –ò–∑–º–µ–Ω–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
"""
    return commands_info